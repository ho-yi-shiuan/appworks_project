<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel=stylesheet type="text/css" href="./index.css">
</head>
<body>
<span style="font-family:Microsoft JhengHei;">
	<header>
	<div class = "mainheader_index">
		<a href="/index.html"><div id = "logo"><img src="/images/pet_logo.png" height=100%></div></a>
		<div id="sidelist_container">
			<ul class="sidelist">
				<li><a href="/index.html" style="text-decoration: none; color: black;">走失總覽</a></li>
				<li>｜</li>
				<li><a href="/index.html" style="text-decoration: none; color: black;">拾獲總覽</a></li>
				<li>｜</li>
				<li><a href="/new_lost.html" style="text-decoration: none; color: black;">我要刊登</a></li>
				<li>｜</li>
				<li><a href="/profile.html" style="text-decoration: none; color: black;">會員頁面</a></li>
			</ul>
		</div>
	</div>
	</header>
	<div class="body">
		<div class="lost_pets">
			<div class="container">
				<a href="/new_lost.html"><img class="image" src="/images/add.png"></a>
				<div class="name">點此新增</div>
			</div>
		</div>
	</div>
	
<script>
	const xhr = new XMLHttpRequest();
	var url = "/lost_record";
	xhr.open("get", url);
	xhr.onload = function(){
		var pets = JSON.parse(this.response);
		if(pets.data.length == 0){
			//顯示目前沒有協尋中寵物
		}else{
			for(i=0; i<pets.data.length; i++){
				var container = document.createElement("div");
				container.className = "container";
				var image_container = document.createElement("a");
				image_container.href = "/room?id="+pets.data[i].id;
				var image = document.createElement("img");
				image.className = "image";
				image.src = pets.data[i].picture;
				//照片連結
				image_container.appendChild(image);
				var name = document.createElement("div");
				name.className = "name";
				var pet_name = document.createTextNode(pets.data[i].name);
				name.appendChild(pet_name);
				var location = document.createElement("div");
				location.className = "location";
				var pet_location = document.createTextNode(pets.data[i].lost_location);
				location.appendChild(pet_location);
				var time = document.createElement("div");
				time.className = "time";
				var pet_time = document.createTextNode(pets.data[i].lost_time);
				time.appendChild(pet_time);
				container.appendChild(image_container);
				container.appendChild(name);
				container.appendChild(location);
				container.appendChild(time);
				var exist_container = document.getElementsByClassName("container")[0];
				document.getElementsByClassName("lost_pets")[0].insertBefore(container, exist_container);				
			}
		}
	}
	xhr.send();
</script>
</body>
</html>